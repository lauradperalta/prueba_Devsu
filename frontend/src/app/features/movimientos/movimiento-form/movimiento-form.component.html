<form [formGroup]="movimientoForm" (ngSubmit)="guardar()">
  <div *ngIf="error" class="alert alert-error">{{ error }}</div>

  <div class="form-group">
    <label for="numeroCuenta">Cuenta *</label>
    <select 
      id="numeroCuenta"
      formControlName="numeroCuenta"
      [class.input-error]="f['numeroCuenta'].invalid && f['numeroCuenta'].touched">
      <option value="">Seleccione una cuenta...</option>
      <option *ngFor="let cuenta of cuentas" [value]="cuenta.numeroCuenta">
        {{ cuenta.numeroCuenta }} - {{ cuenta.tipoCuenta }} - {{ cuenta.nombreCliente }}
      </option>
    </select>
    <div class="error-message" *ngIf="f['numeroCuenta'].invalid && f['numeroCuenta'].touched">
      Debe seleccionar una cuenta
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="tipoMovimiento">Tipo de Movimiento *</label>
      <select 
        id="tipoMovimiento"
        formControlName="tipoMovimiento">
        <option value="Crédito">Depósito (Crédito)</option>
        <option value="Débito">Retiro (Débito)</option>
      </select>
    </div>

    <div class="form-group">
      <label for="valor">Valor *</label>
      <input 
        id="valor"
        type="number" 
        step="0.01"
        formControlName="valor"
        [class.input-error]="f['valor'].invalid && f['valor'].touched">
      <div class="error-message" *ngIf="f['valor'].invalid && f['valor'].touched">
        <span *ngIf="f['valor'].errors?.['required']">El valor es obligatorio</span>
        <span *ngIf="f['valor'].errors?.['min']">El valor debe ser mayor a 0</span>
      </div>
    </div>
  </div>

  <div class="form-actions">
    <button type="button" class="btn btn-secondary" (click)="onCancelar()" [disabled]="loading">
      Cancelar
    </button>
    <button type="submit" class="btn btn-primary" [disabled]="loading || movimientoForm.invalid">
      {{ loading ? 'Guardando...' : 'Guardar' }}
    </button>
  </div>
</form>

